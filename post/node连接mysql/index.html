<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.74.3" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>node连接MySQL &middot; 阿泽的博客</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://liuzeaa.github.io/goblog/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://liuzeaa.github.io/goblog/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://liuzeaa.github.io/goblog/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://liuzeaa.github.io/goblog/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://liuzeaa.github.io/goblog/"><h1>阿泽的博客</h1></a>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://liuzeaa.github.io/goblog/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2020. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>node连接MySQL</h1>
  <time datetime=2018-05-10T15:40:04Z class="post-date">Thu, May 10, 2018</time>
  <p>之前讲了怎么安装MySQL，今天就讲下这么用node去连接操作MySQL。</p>
<h2 id="安装">安装</h2>
<pre><code>npm install mysql
</code></pre><h2 id="连接">连接</h2>
<pre><code>const mysql = require('mysql');

let connection = mysql.createConnection({
    host : 'localhost',
    user : 'root',
    password : 'password',
    database : 'test'
});

connection.connect(function(err) {
  if (err) {
    console.error('连接出错: ' + err.stack);
    return;
  }

  console.log('连接成功 id ' + connection.threadId);
});
</code></pre><p>host：连接的服务器
user：用户名默认是root
password：之前设置的MySQL密码
database： 要连接的库</p>
<h2 id="常用的sql语句">常用的SQL语句</h2>
<p>SQL 是一门 ANSI 的标准计算机语言，用来访问和操作数据库系统。SQL 语句用于取回和更新数据库中的数据。SQL 可与数据库程序协同工作，比如 MS Access、DB2、Informix、MS SQL Server、Oracle、Sybase 以及其他数据库系统。</p>
<p>增</p>
<pre><code>INSERT INTO user (username, pass) VALUES ('blog.langpz.com', '123456');
</code></pre><p>INSERT INTO 表名称 VALUES (值1, 值2,&hellip;.)
指定所要插入数据的列
INSERT INTO table_name (列1, 列2,&hellip;) VALUES (值1, 值2,&hellip;.)</p>
<p>删</p>
<pre><code>DELETE FROM user  WHERE id = 0
</code></pre><p>DELETE FROM 表名称 WHERE 列名称 = 值
不加WHERE会删除所有行
WHERE子句用于规定选择的标准。</p>
<p>改</p>
<pre><code>UPDATE user SET pass = 'bbb' WHERE username = '张三'
</code></pre><p>UPDATE 表名称 SET 列名称 = 新值 WHERE 列名称 = 某值</p>
<p>查</p>
<pre><code>SELECT * FROM user
</code></pre><p>SELECT 列名 FROM 表名 注： * 代表全部</p>
<h2 id="node操作mysql">node操作MySQL</h2>
<p>查询</p>
<pre><code>connection.query('SELECT * FROM user WHERE username = &quot;blog.langpz.com&quot;', (err, results, fields) =&gt; {
    if(err){
        console.log(err);
    }
    console.log(results);
})
</code></pre><p>删除</p>
<pre><code>connection.query('DELETE FROM user  WHERE id = 1', (err, results) =&gt; {
    if(err){
        console.log(err);
    }
    console.log(results);
})
</code></pre><p>增加</p>
<pre><code>connection.query('INSERT INTO user(username, pass) VALUES(?, ?)',['lan', 'abc'], (err, results) =&gt; {
    if(err){
        console.log(err);
    }
    console.log(results);
})
</code></pre><p>修改</p>
<pre><code>connection.query('UPDATE user SET pass = &quot;bbb&quot; WHERE username = &quot;lan&quot;', (err, results) =&gt; {
    if(err){
        console.log(err);
    }
    console.log(results);
})
</code></pre><p>终止连接</p>
<pre><code>connection.end(function(err) {
  // The connection is terminated now
});
connection.destroy();
</code></pre><p>调用这两个方法都可以。
基本操作就是这个流程，可以通过路由封装接口，写一个CRUD应用，mysql模块更多参数可以去看github。</p>
<h1 id="参考">参考</h1>
<p><a href="https://github.com/mysqljs/mysql">https://github.com/mysqljs/mysql</a></p>
</div>


    </main>

    
      
    
  </body>
</html>
